# Посібник користувача CyberTracker UA

Покрокова інструкція з використання системи моніторингу кібератак.

---

## Зміст

- [Початок роботи](#початок-роботи)
- [Дашборд](#дашборд)
- [Інциденти](#інциденти)
- [Загрозливі особи](#загрозливі-особи)
- [Організації](#організації)
- [IOC індикатори](#ioc-індикатори)
- [Документи (PDF аналіз)](#документи-pdf-аналіз)
- [Графова візуалізація](#графова-візуалізація)
- [Звіти](#звіти)
- [Автоматизація](#автоматизація)

---

## Початок роботи

### Запуск системи

```bash
# Активувати віртуальне середовище
venv\Scripts\activate          # Windows
source venv/bin/activate       # Linux/macOS

# Запустити сервер
python run.py
```

Відкрийте браузер за адресою: **http://127.0.0.1:5000**

### Перше завантаження даних

Після першого запуску база даних порожня. Виконайте наступні кроки:

```
Крок 1: Оновити RSS    -> Кнопка "Оновити" в навігації
Крок 2: Скрапити        -> Кнопка "Скрапити" (завантажити повні тексти)
Крок 3: Перекласти      -> Кнопка "Перекласти" (переклад українською)
Крок 4: IOC фіди        -> Кнопка "IOC" (завантажити індикатори)
Крок 5: Імпорт розвідки -> Кнопка "Імпорт" (завантажити осіб/організації)
Крок 6: Синхронізація   -> Кнопка "Синхр. Neo4j" (якщо Neo4j налаштовано)
```

### Навігаційна панель

Верхня навігація містить:

```
[Дашборд] [Інциденти] [Особи] [Організації] [IOC] [Документи] [Граф]

Кнопки управління (праворуч):
[Оновити] [Скрапити] [Перекласти] [Звіт] [IOC] [Імпорт] [Синхр. Neo4j]
```

---

## Дашборд

**URL:** `/`

Головна сторінка з загальною статистикою та аналітикою.

### Статистичні картки

- **Загалом** - загальна кількість інцидентів у базі
- **За місяць** - інциденти за поточний місяць
- **Критичні** - інциденти з рівнем "Критичний"
- **Останнє оновлення** - час останнього завантаження RSS

### Графіки

1. **Динаміка за місяцями** (лінійний графік) - тренд кількості інцидентів за останні 12 місяців
2. **Типи атак** (кругова діаграма) - розподіл за типами: Phishing, Malware, Ransomware тощо
3. **Сектори** (горизонтальна стовпчикова) - розподіл за цільовими секторами
4. **Критичність** (кругова діаграма) - розподіл за рівнями критичності

### Останні інциденти

Таблиця 10 найновіших інцидентів з колонками:
- Дата
- Заголовок (українською, якщо доступно)
- Тип атаки
- Критичність (кольоровий бейдж)
- Джерело

---

## Інциденти

### Список інцидентів

**URL:** `/incidents`

Повний каталог кіберінцидентів з можливостями пошуку та фільтрації.

#### Пошук

Введіть текст у поле пошуку для пошуку по:
- Заголовку (оригінал та переклад)
- Опису
- Загрозливому актору

#### Фільтри

| Фільтр | Опис | Значення |
|--------|------|----------|
| Тип атаки | Класифікація інциденту | Phishing, Malware, Ransomware, Wiper, DDoS, Exploit, Espionage, Defacement, Supply Chain |
| Критичність | Рівень загрози | Критичний, Високий, Середній, Низький |
| Джерело | RSS-канал | CERT-UA, BleepingComputer, The Record, SecurityWeek, тощо |
| Сектор | Цільовий сектор | Уряд, Енергетика, Оборона, Фінанси, тощо |
| Дата від | Початок діапазону | Формат: YYYY-MM-DD |
| Дата до | Кінець діапазону | Формат: YYYY-MM-DD |

#### Пагінація

20 інцідентів на сторінку. Навігація внизу сторінки.

### Деталі інциденту

**URL:** `/incidents/<id>`

Повна інформація про обраний інцидент:

- **Метадані**: дата, джерело, тип атаки, сектор, критичність, загрозливий актор
- **MITRE ATT&CK**: посилання на техніку (якщо визначено)
- **IOC індикатори**: витягнуті IP, домени, хеші, CVE (згруповані за типом)
- **Повний текст**: стаття українською (з fallback на оригінал)
- **Зображення**: фото зі статті (якщо завантажені)
- **Посилання**: оригінал статті

### Ручне створення

**URL:** `/incidents/new`

Форма для ручного додавання інциденту:
- Заголовок (обов'язково)
- Опис
- Дата
- Джерело та URL
- Тип атаки (випадний список)
- Сектор
- Загрозливий актор
- IOC індикатори (текстове поле)
- Критичність
- MITRE техніка

---

## Загрозливі особи

### Каталог осіб

**URL:** `/persons`

Директорія відомих загрозливих осіб (хакери, оператори APT-груп тощо).

#### Можливості:
- Пошук по імені та псевдонімам
- Фільтрація за роллю (Hacker, Operator, Commander тощо)
- Фільтрація за організацією
- Картки з фото, ім'ям, роллю, організацією та країною

### Профіль особи

**URL:** `/persons/<id>`

Детальна інформація:
- Фото (якщо доступне)
- Повне ім'я та псевдоніми
- Роль та статус
- Організація та країна
- Опис діяльності
- Список операцій (JSON)
- Пов'язані особи (з тієї ж організації)

---

## Організації

### Каталог організацій

**URL:** `/organizations`

Список відомих загрозливих організацій (APT-групи, хакерські підрозділи).

#### Можливості:
- Пошук по назві та псевдонімам
- Фільтрація за типом (APT, Hacktivist, State-sponsored тощо)

### Профіль організації

**URL:** `/organizations/<id>`

- Назва, тип, країна
- Псевдоніми
- Батьківська організація (якщо є)
- Опис
- Відомі операції
- Кількість членів
- Кнопка "Звіт по організації" - генерує Word-документ

---

## IOC індикатори

### Каталог IOC

**URL:** `/ioc`

Каталог індикаторів компрометації з фідів загроз.

#### Статистичні картки:
- Загальна кількість IOC
- Кількість критичних
- Кількість джерел
- Час останнього оновлення

#### Фільтри:
| Фільтр | Значення |
|--------|----------|
| Тип | ipv4, ipv6, domain, url, hash_md5, hash_sha1, hash_sha256, email, cve |
| Джерело | ThreatFox, URLhaus, Feodo Tracker, document_analysis |
| Рівень загрози | critical, high, medium, low, unknown |

#### Таблиця:
- Значення IOC
- Тип (кольоровий бейдж)
- Рівень загрози (кольоровий бейдж)
- Джерело
- Теги
- Дата виявлення

### Деталі IOC

**URL:** `/ioc/<id>`

- Повне значення IOC
- Тип та рівень загрози
- Теги та рівень довіри (confidence)
- Опис
- Дати першого/останнього спостереження
- **Збагачення** (якщо налаштовано):
  - VirusTotal: кількість детекцій, репутація
  - AbuseIPDB: рейтинг зловживання (abuse score)

---

## Документи (PDF аналіз)

### Каталог документів

**URL:** `/documents`

Список завантажених та проаналізованих документів.

#### Статистика:
- Загальна кількість документів
- Загальна кількість IOC з документів
- Загальна кількість сторінок

#### Завантаження нового документа:

1. Натисніть кнопку **"Завантажити документ"**
2. У модальному вікні оберіть файл (PDF, TXT, CSV або DOCX)
3. Максимальний розмір: 50 MB
4. Натисніть **"Аналізувати"**

Система автоматично виконає:
- Витяг тексту з документа
- Визначення мови (UK/EN/RU)
- Екстракцію IOC індикаторів
- Ідентифікацію загрозливих акторів
- Класифікацію типів атак та секторів
- Виявлення MITRE ATT&CK технік
- Аналіз ключових слів
- Генерацію підсумку

### Деталі документа

**URL:** `/documents/<id>`

#### Інформація про файл:
- Назва, тип, розмір, кількість сторінок
- Мова документа
- Кількість IOC
- Статус синхронізації з Neo4j

#### Результати аналізу:

**Загрозливі актори** - червоні бейджі з назвами виявлених APT-груп

**Типи атак** - бейджі з класифікацією атак

**Цільові сектори** - бейджі секторів

**MITRE ATT&CK** - список виявлених технік з ID

**IOC індикатори** - вкладки (tabs) за типами:
- IPv4 адреси
- Домени
- URL
- MD5 хеші
- SHA256 хеші
- CVE ідентифікатори
- Email адреси

**Ключові слова** - хмара тегів з частотою

**Підсумок** - автогенерований опис документа

**Текст** - витягнутий текст (розгортається)

#### Синхронізація з Neo4j:
Натисніть **"Синхронізувати з Neo4j"** для додавання документа та його зв'язків у графову базу.

---

## Графова візуалізація

**URL:** `/graph`

Інтерактивна візуалізація зв'язків між кіберзагрозами у Neo4j.

### Вимоги

Для роботи графу необхідно:
1. Встановити та запустити Neo4j
2. Вказати `NEO4J_PASSWORD` у `.env`
3. Синхронізувати дані: кнопка **"Синхр. все в Neo4j"**

### Фільтри графу

| Фільтр | Опис |
|--------|------|
| Актор | Показати тільки зв'язки конкретного актора |
| Сектор | Показати зв'язки з конкретним сектором |
| Тип атаки | Фільтр за типом атаки |
| Ліміт | Максимальна кількість вузлів (50-2000) |

### Типи вузлів (фільтр чекбоксами)

| Тип | Колір | Форма |
|-----|-------|-------|
| Incident | Синій (#005BBB) | Еліпс |
| ThreatActor | Червоний (#dc3545) | Ромб |
| AttackType | Помаранчевий (#fd7e14) | Шестикутник |
| Sector | Зелений (#28a745) | Трикутник |
| MITRETechnique | Пурпурний (#6f42c1) | Зірка |
| IOCIndicator | Жовтий (#ffc107) | Прямокутник |
| Source | Сірий (#6c757d) | Еліпс |
| Person | Рожевий (#e83e8c) | Еліпс |
| Organization | Бірюзовий (#20c997) | Закруглений прямокутник |
| Document | Жовтий (#ffc107) | Прямокутник |
| Country | Блакитний (#17a2b8) | П'ятикутник |
| Operation | Коричневий (#795548) | Бочка |

### Взаємодія з графом

- **Клік на вузол**: підсвітка зв'язаних вузлів + інформаційна картка
- **Перетягування**: переміщення вузлів
- **Зум**: наближення/віддалення
- **Layout**: автоматичне розташування (Cose)

### Метрики центральності

Доступні через Graph API:
- **Degree** - кількість зв'язків вузла
- **Betweenness** - посередництво (скільки найкоротших шляхів проходить через вузол)
- **Closeness** - близькість до всіх інших вузлів
- **PageRank** - важливість вузла (алгоритм Google)

---

## Звіти

### Щоденний звіт

**Кнопка:** "Звіт" в навігації або автоматично о 08:00 UTC

Генерує Word-документ (.docx) на Робочому столі:
- Заголовок з датою
- Оформлення в кольорах прапора України
- Таблиця інцидентів з метаданими
- Повний текст кожного інциденту (українською)
- Вбудовані зображення

**Ім'я файлу:** `CyberTracker_Report_YYYY-MM-DD.docx`

### Звіт по організації

**URL:** `/report-org/<id>`

Генерує звіт про конкретну загрозливу організацію:
- Профіль організації
- Пов'язані інциденти
- Використані техніки

### IOC звіт

**URL:** `/report-ioc?ioc_type=ipv4&threat_level=critical`

Генерує звіт з IOC-індикаторами:
- Фільтрація за типом, рівнем загрози, джерелом
- Таблиця IOC з метаданими

---

## Автоматизація

### Планувальник задач

Система автоматично виконує задачі за розкладом:

| Задача | Розклад | Опис |
|--------|---------|------|
| RSS оновлення | Кожні 30 хв | Перевірка всіх 11 RSS-каналів |
| Twitter | Кожні 15 хв | Перевірка 8 акаунтів (якщо увімкнено) |
| LinkedIn | Кожні 120 хв | Google Custom Search (якщо увімкнено) |
| IOC фіди | Кожні 60 хв | ThreatFox, URLhaus, Feodo Tracker |
| Щоденний конвеєр | 08:00 UTC | Повний цикл збору + звіт |

### Щоденний конвеєр (08:00 UTC)

Автоматично виконується повний цикл:

```
08:00 RSS фіди
  |
  v
08:01 Twitter (якщо увімкнено)
  |
  v
08:02 LinkedIn (якщо увімкнено)
  |
  v
08:03 IOC фіди (якщо увімкнено)
  |
  v
08:05 Скрапінг повних текстів
  |
  v
08:10 Переклад українською
  |
  v
08:15 Синхронізація Neo4j (якщо увімкнено)
  |
  v
08:20 Генерація щоденного звіту
```

### Ручний запуск задач

Всі задачі можна запустити вручну через кнопки або URL:

| URL | Дія |
|-----|-----|
| /fetch | RSS оновлення |
| /scrape | Скрапінг статей |
| /translate | Переклад |
| /fetch-ioc-feeds | IOC фіди |
| /report | Звіт |
| /sync-all-graph | Neo4j синхронізація |
| /enrich | IOC збагачення |
| /import-threat-intel | Імпорт розвідки |

---

## Поради та рекомендації

### Оптимальний робочий процес

1. **Щоранку**: перевірте дашборд на нові критичні інциденти
2. **Завантажте PDF**: звіти CERT-UA, CISA advisories тощо
3. **Синхронізуйте Neo4j**: для перехресного аналізу
4. **Використовуйте граф**: для виявлення зв'язків між акторами

### Пошук IOC

Для швидкого пошуку конкретного IOC:
1. Перейдіть на `/ioc`
2. Введіть IP, домен або хеш у пошукове поле
3. Або використовуйте API: `curl /api/ioc?q=192.0.2.1`

### Аналіз загрозливого актора

1. Перейдіть на `/graph`
2. Оберіть актора у фільтрі
3. Перегляньте пов'язані інциденти, техніки, сектори
4. Використовуйте API centrality для рейтингу акторів

---

*Посібник користувача CyberTracker UA*
